const dbcalls = require('../utility_modules/database_calls.js')
const utils = require('../utility_modules/Utils.js')

module.exports.addSensorReadings = async function addSensorReadings(state){
  for(i = 0; i < state.sensorState.getSensorState().length; i++) {
    try {
      let data = await utils.getSensorVal(state, i)
      if (data.val == undefined){
        throw ("Could not fetch data from sensor: {" + state.sensorState.data[i].sensorType + ' @ ' + state.sensorState.data[i].sensorLocation + '}')
      }
      await dbcalls.addSensorReading(data.sensorID, data.val)
    } catch (e) {
      utils.debugPrintout(e)
    }
  }
}

