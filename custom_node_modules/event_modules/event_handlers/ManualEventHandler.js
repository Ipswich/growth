const dbcalls = require('../../utility_modules/database_calls.js')
const eventTriggers = require('../EventTriggers.js')
const utils = require('../../utility_modules/Utils.js')

//Runs manual events instantly
module.exports.ManualEventHandler = async function ManualEventHandler(state) {
  const events = await dbcalls.getEnabledEvents();
  var schedule = await eventTriggers.getSchedule('Manual');
  schedule = utils.eventTypeMapper(events, schedule)
  //Error on things
  if (events == undefined || schedule == undefined) {
    console.error("ManualEventHandler.js: ManualEventHandler() failed!");
  } else {
    //Iterate through manual Schedules
    for(let i = 0; i < schedule.length; i++){
      await eventTriggers.triggerEvent(schedule[i], state);
    }        
  }
}
