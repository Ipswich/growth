var mappings = require('./Mappings.js');

module.exports = class SensorState {
  constructor() {
    return (async () => {
      this.data = [];
      //Get outputs
      let sensorMappings = await mappings.getSensorMappings();
      //map initial values (default to off (event 2))
      for (let i = 0; i < sensorMappings.length; i++){
        this.data[i] = {};
        this.data[i].sensorID = sensorMappings[i].sensorID;
        this.data[i].sensorHardwareID = sensorMappings[i].sensorHardwareID;
        this.data[i].sensorModel = sensorMappings[i].sensorModel;
        this.data[i].sensorType = sensorMappings[i].sensorType;
        this.data[i].sensorUnits = sensorMappings[i].sensorUnits;
        this.data[i].sensorProtocol = sensorMappings[i].sensorProtocol;
        this.data[i].sensorPin = sensorMappings[i].SENSOR_PIN ? sensorMappings[i].SENSOR_PIN : null;
        this.data[i].sensorObject = null;
      }
      return this;
    })();
  }

  setSensorObject(sensorID, obj) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        this.data[i].sensorObject = obj;
      }
    }
  }

  getSensorObject(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorObject;
      }
    }
  }

  getSensorType(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorType;
      }
    }
  }

  getSensorUnits(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorUnits;
      }
    }
  }

  getSensorProtocol(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorProtocol;
      }
    }
  }

  getSensorModel(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorModel;
      }
    }
  }

  getSensorID(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorID;
      }
    }
  }

  getSensorHardwareID(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorHardwareID;
      }
    }
  }

  getSensorPin(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorPin;
      }
    }
  }

  getSensorID(sensorID) {
    for(let i = 0; i < this.data.length; i++){
      if(this.data[i].sensorID == sensorID){
        return this.data[i].sensorID;
      }
    }
  }

  getSensorState(){
    return this.data;
  }
}
